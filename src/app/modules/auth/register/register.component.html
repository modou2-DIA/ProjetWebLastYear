<main class="container-fluid main-signup">
    <div class="row">
        <div class="col-md-6 left-signup">
            <h1>Créez votre compte<br>Et rejoignez notre plateforme</h1>
            <img src="https://i.postimg.cc/NFh679k6/educationlogo.avif" class="left-signup-img" alt="education logo">
        </div>
        <div class="col-md-6 right-signup">
            <div class="card card-signup">
                <h1 class="text-center">Inscription</h1>

                <p *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</p>

                <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                    <div class="mb-3">
                        <label for="role" class="form-label">Rôle</label>
                        <select class="form-control" id="role" formControlName="role">
                            <option value="">Sélectionnez un rôle</option>
                            <option value="ENSEIGNANT">Enseignant</option>
                            <option value="SECRETAIRE">Secrétaire</option>
                        </select>
                        <div *ngIf="registerForm.get('role')?.invalid && registerForm.get('role')?.touched"
                            class="text-danger">
                            Le rôle est obligatoire
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="nom" class="form-label">Nom</label>
                        <input type="text" class="form-control" id="nom" formControlName="nom">
                        <div *ngIf="registerForm.get('nom')?.errors?.['required'] && registerForm.get('nom')?.touched"
                            class="text-danger">
                            Le nom est obligatoire
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="prenom" class="form-label">Prénom</label>
                        <input type="text" class="form-control" id="prenom" formControlName="prenom">
                        <div *ngIf="registerForm.get('prenom')?.errors?.['required'] && registerForm.get('prenom')?.touched"
                            class="text-danger">
                            Le prénom est obligatoire
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" formControlName="email">
                        <div *ngIf="registerForm.get('email')?.errors?.['required'] && registerForm.get('email')?.touched"
                            class="text-danger">
                            L'email est obligatoire
                        </div>
                        <div *ngIf="registerForm.get('email')?.errors?.['email'] && registerForm.get('email')?.touched"
                            class="text-danger">
                            Veuillez entrer un email valide
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">Mot de passe</label>
                        <input type="password" class="form-control" id="password" formControlName="password">
                        <div *ngIf="registerForm.get('password')?.errors?.['required'] && registerForm.get('password')?.touched"
                            class="text-danger">
                            Le mot de passe est obligatoire
                        </div>
                        <div *ngIf="registerForm.get('password')?.errors?.['minlength']" class="text-danger">
                            Le mot de passe doit contenir au moins 8 caractères
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Confirmer le mot de passe</label>
                        <input type="password" class="form-control" id="confirmPassword"
                            formControlName="confirmPassword">
                        <div *ngIf="registerForm.get('confirmPassword')?.errors?.['required'] && registerForm.get('confirmPassword')?.touched"
                            class="text-danger">
                            La confirmation est obligatoire
                        </div>
                        <div *ngIf="registerForm.hasError('mismatch')" class="text-danger">
                            Les mots de passe ne correspondent pas
                        </div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid || isLoading">
                            <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status"
                                aria-hidden="true"></span>
                            {{ isLoading ? 'Création en cours...' : 'Créer un compte' }}
                        </button>
                        <button type="button" class="btn btn-link" routerLink="/login">
                            <a class="nav-link" href="/login">  Déjà un compte ? Se connecter</a>
                           
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>

<style>
    .main-signup {
        min-height: 100vh;
        display: flex;
        align-items: center;
        background-color: #f8f9fa; /* Un fond clair pour la page */
    }

    .left-signup {
        background-color: #e9ecef; /* Un fond gris clair pour la partie gauche */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 2rem;
        text-align: center;
    }

    .left-signup h1 {
        color: #007bff; /* Couleur primaire pour le titre */
        margin-bottom: 1rem;
        font-size: 2.5rem;
    }

    .left-signup-img {
        max-width: 80%;
        height: auto;
    }

    .right-signup {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2rem;
    }

    .card-signup {
        width: 100%;
        max-width: 400px; /* Limiter la largeur de la carte */
        padding: 1.5rem;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }

    .card-signup h1 {
        margin-bottom: 1.5rem;
    }

    .form-label {
        margin-top: 0.5rem;
    }

    .text-danger {
        font-size: 0.875rem;
    }

    .btn-primary {
        margin-top: 1rem;
    }

    .btn-link {
        margin-top: 0.5rem;
    }
</style>